<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy for Windows (vers 14 February 2006), see www.w3.org" />
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>2012 Winter Movie Draft</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<link rel="Stylesheet" href="./style.css" />
</head>
<body>
<div id="saved">Saved!</div>
<form method="post" action="save.php" accept-charset="UTF-8">
<table>
<tr class="whoareyou">
<td>Who are you?</td>
<td colspan="3"><input style="text-align:left;" id="contestant" type="text" size="20" value=""></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt2109184" class="title">Paranormal Activity 4</a></td>
<td><span class="release">Oct. 19</span></td>
<td><span class="actors">Katie Featherston</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1712170" class="title">Alex Cross</a></td>
<td><span class="release">Oct. 19</span></td>
<td><span class="actors">Tyler Perry</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1371111" class="title">Cloud Atlas</a></td>
<td><span class="release">Oct. 26</span></td>
<td><span class="actors">Tom Hanks<br/>Halle Berry</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1772341" class="title">Wreck-It Ralph</a></td>
<td><span class="release">Nov. 2</span></td>
<td><span class="actors">John C. Reilly<br/>Jack McBrayer</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1907668" class="title">Flight</a></td>
<td><span class="release">Nov. 2</span></td>
<td><span class="actors">Denzel Washington</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1074638" class="title">Skyfall</a></td>
<td><span class="release">Nov. 9</span></td>
<td><span class="actors">Daniel Craig<br/>Judi Dench</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt0443272" class="title">Lincoln</a></td>
<td><span class="release">Nov. 9</span></td>
<td><span class="actors">Daniel Day-Lewis<br/>Joseph Gordon-Levitt</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1673434" class="title">Twilight: Breaking Dawn Part 2</a></td>
<td><span class="release">Nov. 16</span></td>
<td><span class="actors">Kristen Stewart<br/>Robert Pattinson</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1045658" class="title"> Silver Linings Playbook</a></td>
<td><span class="release">Nov. 21</span></td>
<td><span class="actors">Bradley Cooper<br/>Robert De Niro</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1446192" class="title">Rise of the Guardians</a></td>
<td><span class="release">Nov. 21</span></td>
<td><span class="actors">Hugh Jackman<br/>Alec Baldwin</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt0454876" class="title">Life of Pi</a></td>
<td><span class="release">Nov. 21</span></td>
<td><span class="actors">Suraj Sharma</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1764234" class="title">Killing Them Softly</a></td>
<td><span class="release">Nov. 30</span></td>
<td><span class="actors">Brad Pitt<br/>Ray Liotta</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1477855" class="title">Hyde Park on Hudson</a></td>
<td><span class="release">Dec. 7</span></td>
<td><span class="actors">Bill Murray</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1540128" class="title">Playing for Keeps</a></td>
<td><span class="release">Dec. 7</span></td>
<td><span class="actors">Gerard Butler<br/>Jessica Biel</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt0903624" class="title">The Hobbit</a></td>
<td><span class="release">Dec. 14</span></td>
<td><span class="actors">Martin Freeman<br/>Ian McKellen</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1790885" class="title">Zero Dark Thirty</a></td>
<td><span class="release">Dec. 19</span></td>
<td><span class="actors">Chris Pratt</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt0790724" class="title">Jack Reacher</a></td>
<td><span class="release">Dec. 21</span></td>
<td><span class="actors">Tom Cruise</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1758830" class="title">This Is 40</a></td>
<td><span class="release">Dec. 21</span></td>
<td><span class="actors">Paul Rudd<br/>Leslie Mann</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1707386" class="title">Les Miserables</a></td>
<td><span class="release">Dec. 25</span></td>
<td><span class="actors">Hugh Jackman<br/>Russell Crowe</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1853728" class="title">Django Unchained</a></td>
<td><span class="release">Dec. 25</span></td>
<td><span class="actors">Jamie Foxx<br/>Leonardo DiCaprio</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr class="movie">
<td><a href="http://www.imdb.com/title/tt1694020" class="title">The Guilt Trip</a></td>
<td><span class="release">Dec. 25</span></td>
<td><span class="actors">Seth Rogen<br/>Barbra Streisand</span></td>
<td><input type="text" class="shares" maxlength="3" name="movies[]" size="5" value="0"></input></td>
</tr>
<tr>
	<td><input id="btnSave" type="submit" value="Save"></input></td>
	<td>&nbsp;</td>
	<td>&nbsp;</td>
	<td><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a></td>
</tr>
</table>
<p><input type="hidden" name="data" id="data" value="" /></p>
</form>
<div class="moneyRemaining">
	<span class="money">100</span><br/>
	<span class="remaining">remaining</span>
</div>
<script type="text/javascript">
<!--
	$(".title").click(function(event){
		event.preventDefault();
		window.open($(this).attr("href"));
	});
	
	function updateMoneyRemaining()
	{
		var start = 100;
		for (i=0;i<$("input").length;i++)
		{
			start -= parseInt($("input").eq(i).val()) || 0;
		}
		
		$("div.moneyRemaining span.money").html(start);
		
		var pct = Math.max(0,120*(start/100));
		$("div.moneyRemaining").css("background-color", hsl2rgb(pct, 100, 80));
		$("div.moneyRemaining").css("border", "solid 3px " + hsl2rgb(pct, 100, 50));
		if (start < 0)
			$("#btnSave").attr("disabled","disabled");
		else
			$("#btnSave").removeAttr("disabled");
		
		return start;
	}
	
	function hsl2rgb(h, s, l) {
		var m1, m2, hue;
		var r, g, b
		s /=100;
		l /= 100;
		if (s == 0)
			r = g = b = (l * 255);
		else {
			if (l <= 0.5)
				m2 = l * (s + 1);
			else
				m2 = l + s - l * s;
			m1 = l * 2 - m2;
			hue = h / 360;
			r = HueToRgb(m1, m2, hue + 1/3);
			g = HueToRgb(m1, m2, hue);
			b = HueToRgb(m1, m2, hue - 1/3);
		}
		return "rgb("+Math.round(r)+", "+Math.round(g)+", "+Math.round(b)+")";
	}

	function HueToRgb(m1, m2, hue) {
		var v;
		if (hue < 0)
			hue += 1;
		else if (hue > 1)
			hue -= 1;

		if (6 * hue < 1)
			v = m1 + (m2 - m1) * hue * 6;
		else if (2 * hue < 1)
			v = m2;
		else if (3 * hue < 2)
			v = m1 + (m2 - m1) * (2/3 - hue) * 6;
		else
			v = m1;

		return 255 * v;
	}
	
	function assembleShares()
	{
		var data = {};
		var movies = $("tr.movie");
		
		data["NAME"] = $("#contestant").val();
		
		for(i=0;i<movies.length;i++)
		{
			var movie = movies.eq(i);
			var title = movie.find(".title").html();
			var share = parseInt(movie.find(".shares").val());
			data[title] = share;
		}
		
		$("#data").val(JSON.stringify(data));
		
	}
	
	if (window.location.toString().indexOf("saved") > 0)
		$("#saved").css("display","block");
	
	
	$("input").blur(updateMoneyRemaining);
	$("#btnSave").click(assembleShares);
// -->
	</script>

</body>
</html>
